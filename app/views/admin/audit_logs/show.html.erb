<div class="mb-6">
  <h1 class="text-3xl font-bold">日志详情</h1>
</div>

<div class="card bg-base-100 shadow">
  <div class="card-body">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="label">
          <span class="label-text font-semibold">时间</span>
        </label>
        <div class="text-lg"><%= @audit_log.created_at.strftime("%Y-%m-%d %H:%M:%S") %></div>
      </div>
      <div>
        <label class="label">
          <span class="label-text font-semibold">用户</span>
        </label>
        <div class="text-lg">
          <%= @audit_log.user.email_address %>
          <%= link_to "查看", admin_user_path(@audit_log.user), class: "btn btn-sm btn-ghost ml-2" %>
        </div>
      </div>
      <div>
        <label class="label">
          <span class="label-text font-semibold">操作</span>
        </label>
        <div class="text-lg"><span class="badge badge-outline"><%= @audit_log.action %></span></div>
      </div>
      <div>
        <label class="label">
          <span class="label-text font-semibold">资源</span>
        </label>
        <div class="text-lg">
          <% if @audit_log.resource_type.present? %>
            <%= @audit_log.resource_type %> #<%= @audit_log.resource_id %>
          <% else %>
            -
          <% end %>
        </div>
      </div>
      <div>
        <label class="label">
          <span class="label-text font-semibold">IP地址</span>
        </label>
        <div class="text-lg"><%= @audit_log.ip_address || "-" %></div>
      </div>
      <div>
        <label class="label">
          <span class="label-text font-semibold">用户代理</span>
        </label>
        <div class="text-lg"><%= @audit_log.user_agent || "-" %></div>
      </div>
    </div>

    <% if @audit_log.changes_data.present? %>
      <div class="mt-6">
        <label class="label">
          <span class="label-text font-semibold">变更内容</span>
        </label>
        <div class="bg-base-200 p-4 rounded-lg">
          <pre class="text-sm"><%= JSON.pretty_generate(@audit_log.changes_data) %></pre>
        </div>
      </div>
    <% end %>

    <div class="mt-6">
      <%= link_to "返回列表", admin_audit_logs_path, class: "btn btn-ghost" %>
    </div>
  </div>
</div>

