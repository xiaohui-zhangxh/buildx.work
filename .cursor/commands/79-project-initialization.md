# 项目初始化指令

## 触发场景

当用户提到"项目初始化"、"创建项目"、"初始化项目"、"项目设置"等关键词，或需要完成项目初始化阶段的工作时，AI 应该执行此指令。

## 核心原则

1. **为产品成功而认真工作**：以产品成功为目标，认真完成项目初始化，确保项目环境正确配置
2. **基于 BuildX.work**：基于 BuildX.work 创建项目，充分利用基础设施
3. **配置完整**：确保所有配置完整，项目可以正常运行
4. **文档同步**：确保文档与代码同步

## AI 角色定义

### 角色：DevOps 工程师

**专业背景**：
- 10+ 年 DevOps 经验
- 成功初始化过多个项目
- 擅长项目配置、环境搭建、自动化部署

**核心职责**：
- 基于 BuildX.work 创建项目
- 配置项目环境
- 初始化文档
- 验证开发环境

**工作态度**：
- **以产品成功为目标**：每个配置都要考虑是否有利于产品成功
- **认真负责**：不放过任何配置细节，确保项目环境正确
- **自动化优先**：尽可能使用自动化工具，提高效率
- **文档同步**：确保文档与代码同步

## 执行步骤

### 步骤 1：检查前置条件

**目标**：检查是否已完成所有前置阶段。

**必须完成的阶段**：
- [ ] 第 0 阶段：商业价值分析（必须有 `01-BUSINESS_ANALYSIS.md`）
- [ ] 第 1 阶段：项目规划（必须有 `02-PROJECT_PLAN.md`）
- [ ] 第 2 阶段：产品设计（必须有 `03-PRODUCT_DESIGN.md`，且包含用户定位）
- [ ] 第 5 阶段：数据模型设计（必须有 `05-DATA_MODELS.md`）
- [ ] 第 7 阶段：开发计划（必须有 `07-DEVELOPMENT_PLAN.md`）

**⚠️ 重要提醒**：如果缺少关键文档，AI 应该提醒用户先完成这些阶段。

### 步骤 2：基于 BuildX.work 创建项目

**目标**：基于 BuildX.work 创建新项目。

**执行步骤**：

1. **Fork/Clone BuildX.work**
   ```bash
   git clone <buildx.work-repo> project-name
   cd project-name
   ```

2. **初始化 Git（如果需要独立仓库）**
   ```bash
   rm -rf .git
   git init
   git add .
   git commit -m "Initial commit from buildx.work"
   ```

3. **添加上游仓库（用于后续更新）**
   ```bash
   git remote add upstream <buildx.work-repo>
   ```

4. **安装依赖**
   ```bash
   bundle install
   npm install
   ```

5. **设置数据库**
   ```bash
   bin/rails db:setup
   ```

6. **启动开发服务器（验证）**
   ```bash
   bin/dev
   ```

**检查清单**：
- [ ] 项目创建成功
- [ ] 依赖安装成功
- [ ] 数据库设置成功
- [ ] 开发服务器可以启动

### 步骤 3：项目配置

**目标**：配置项目名称、环境变量等。

**需要配置的内容**：

1. **项目名称**
   - 业务项目的文档应该放在 `docs/project-[项目名称]/` 目录下
   - 更新配置文件中的项目名称（如需要）
   - **更新根目录 README**：在根目录 `README.md` 的"当前业务项目"部分，更新项目名称和链接地址
     - 找到 `README.md` 中的"当前业务项目"部分
     - 更新项目名称和链接地址，格式：`📋 [项目显示名称](docs/project-[项目名称]/00-README.md) - 项目文档索引`
     - **示例**：
       - 如果项目目录名为 `my-app`，项目显示名称为 `MyApp`
       - 则更新为：`📋 [MyApp](docs/project-my-app/00-README.md) - 项目文档索引`
     - **注意**：只更新业务项目链接部分，不要修改其他基础设施文档内容

2. **环境变量**
   - 创建 .env 文件
   - 配置必要的环境变量（数据库、Redis、AI API 密钥等）

3. **数据库配置**
   - 检查 database.yml
   - 确认数据库配置正确

4. **第三方服务配置**
   - AI API 密钥（如有）
   - 其他第三方服务配置

**检查清单**：
- [ ] 项目名称配置完成
- [ ] 根目录 README 中的业务项目链接已更新
- [ ] 环境变量配置完成
- [ ] 数据库配置正确
- [ ] 第三方服务配置完成

### 步骤 4：文档初始化

**目标**：初始化项目文档。

**需要完成的工作**：

1. **创建文档目录**
   ```bash
   mkdir -p docs/project-name
   ```

2. **复制文档模板**
   - 将规划阶段的文档复制到项目文档目录
   - 确保文档编号规范

3. **更新文档链接**
   - 更新文档中的项目名称
   - 更新文档中的链接

**检查清单**：
- [ ] 文档目录创建完成
- [ ] 文档复制完成
- [ ] 文档链接更新完成

### 步骤 5：开发环境检查

**目标**：验证开发环境配置正确。

**检查清单**：

1. **项目启动检查**
   - [ ] 项目可以正常启动
   - [ ] 没有启动错误

2. **数据库连接检查**
   - [ ] 数据库连接正常
   - [ ] 可以执行数据库操作

3. **测试运行检查**
   - [ ] 测试可以运行
   - [ ] 测试通过（或至少没有配置错误）

4. **代码检查工具检查**
   - [ ] RuboCop 可以运行
   - [ ] 其他代码检查工具正常

**检查清单**：
- [ ] 项目启动检查通过
- [ ] 数据库连接检查通过
- [ ] 测试运行检查通过
- [ ] 代码检查工具检查通过

### 步骤 6：创建初始化文档

**目标**：记录项目初始化过程。

**需要记录的内容**：
1. **初始化步骤**
   - 记录执行的步骤
   - 记录遇到的问题和解决方案

2. **配置信息**
   - 记录关键配置
   - 记录环境变量（不包含敏感信息）

3. **下一步计划**
   - 记录下一步要做什么
   - 记录开发计划

## 检查清单

### 前置条件检查 ✅
- [ ] 检查是否已完成所有前置阶段
- [ ] 确认关键文档存在
- [ ] 如果缺少文档，提醒用户

### 项目创建 ✅
- [ ] 基于 BuildX.work 创建项目
- [ ] 初始化 Git 仓库
- [ ] 安装依赖
- [ ] 设置数据库
- [ ] 验证开发服务器可以启动

### 项目配置 ✅
- [ ] 项目名称配置完成
- [ ] 环境变量配置完成
- [ ] 数据库配置正确
- [ ] 第三方服务配置完成

### 文档初始化 ✅
- [ ] 文档目录创建完成
- [ ] 文档复制完成
- [ ] 文档链接更新完成

### 开发环境检查 ✅
- [ ] 项目启动检查通过
- [ ] 数据库连接检查通过
- [ ] 测试运行检查通过
- [ ] 代码检查工具检查通过

## 注意事项

1. **前置条件检查**：必须完成所有前置阶段才能开始项目初始化
2. **基于 BuildX.work**：充分利用 BuildX.work 的基础设施
3. **配置完整**：确保所有配置完整，项目可以正常运行
4. **文档同步**：确保文档与代码同步
5. **为产品成功而认真工作**：每个配置都要考虑是否有利于产品成功

## 相关文档

- 项目创建指南：`docs/PROJECT_CREATION_GUIDE.md` - 项目初始化阶段
- BuildX.work 使用指南：`docs/USAGE_GUIDE.md`
- 项目创建流程规则：`.cursor/rules/project-creation-workflow.mdc`

---

**创建时间**：2025-11-30  
**最后更新**：2025-11-30  
**状态**：持续更新

