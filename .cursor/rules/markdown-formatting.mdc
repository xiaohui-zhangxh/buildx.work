---
description: Markdown 格式编写规范。确保 Markdown 文件在前端渲染时格式正确，避免排版问题。编写或编辑 Markdown 文件时必须遵循此规范。
alwaysApply: true
---

# Markdown 格式编写规范

## 核心原则

编写 Markdown 文件时，必须遵循以下格式规范，确保前端渲染时格式正确，避免排版问题。

## 格式规范

### 1. 代码块前必须有空行

**规则**：代码块（```）前必须有一个空行，否则无法正确识别。

**错误示例**：


    **示例**：
    ```bash
    echo "hello"
    ```

**正确示例**：


    **示例**：

    ```bash
    echo "hello"
    ```

### 2. 列表前建议有空行（重要：仅第一项前）

**规则**：列表的第一项前最好有空行，确保正确渲染。**注意**：这是指整个列表的第一项前面，不是每个列表项前面。

**错误示例**：


    这是说明文字
    - 列表项 1
    - 列表项 2


**正确示例**：


    这是说明文字

    - 列表项 1
    - 列表项 2

### 2.1 多层级列表（重要：子列表项前不要有空行）

**规则**：多层级列表中，子列表项前**不应该**有空行，否则会导致列表结构错误。

**错误示例**：


    这是说明文字

    1. 项目1

        - 子项目

    2. 项目2

        - 子项目

    3. 项目3


**正确示例**：


    这是说明文字

    1. 项目1
        - 子项目
    2. 项目2
        - 子项目
    3. 项目3


**要点**：
- 列表的第一项前有空行（与前面的段落或标题分隔）
- 同一层级的列表项之间**不要**有空行
- 子列表项前**不要**有空行，直接跟在父列表项后面


### 3. 标题前后建议有空行

**规则**：标题前后最好有空行，确保正确渲染。

**错误示例**：


    这是说明文字
    ## 标题
    这是内容


**正确示例**：


    这是说明文字

    ## 标题

    这是内容


### 4. 段落之间必须有空行

**规则**：段落之间必须有空行，否则会被合并为一个段落。

**错误示例**：


    这是第一段。
    这是第二段。


**正确示例**：


    这是第一段。

    这是第二段。


## 常见场景

### 场景 1：在段落后添加代码块

**正确写法**：

    使用以下命令运行测试：

    ```bash
    bin/rails test
    ```

**要点**：段落和代码块之间必须有一个空行。

### 场景 2：在列表后添加代码块

**正确写法**：

    主要步骤包括：

    1. 安装依赖
    2. 运行测试

    使用以下命令：

    ```bash
    bin/rails test
    ```

**要点**：列表和代码块之间必须有一个空行。

### 场景 3：在代码块后添加说明

**正确写法**：

    ```bash
    bin/rails test
    ```

    运行测试后，查看覆盖率报告。

**要点**：代码块和后续段落之间必须有一个空行。

## ⚠️ 强制检查要求

**重要**：每次更新或编辑 Markdown 文件时，AI 必须：

1. **自动检查格式问题**：
   - 检查所有代码块前是否有空行
   - 检查列表前是否有空行（仅第一项前）
   - 检查标题前后是否有空行
   - 检查段落之间是否有空行
   - 检查多层级列表格式是否正确

2. **自动修复格式问题**：
   - 发现格式问题时，必须立即修复
   - 修复后验证格式是否正确
   - 确保所有格式问题都已解决

3. **检查方法**：
   - 使用 `grep` 查找所有代码块位置
   - 检查代码块前的空行
   - 检查列表、标题、段落的格式
   - 验证修复后的格式

**执行规则**：
- ✅ **必须执行**：更新 Markdown 文件后，必须检查并修复格式问题
- ✅ **主动修复**：发现格式问题时，不要等待用户提醒，直接修复
- ✅ **验证修复**：修复后验证格式是否正确

## 注意事项

1. **代码块前必须有空行**：这是最重要的规则，违反会导致代码块无法正确识别
2. **列表第一项前建议有空行**：列表的第一项前建议有空行，但同一层级的列表项之间不要有空行
3. **多层级列表不要有空行**：子列表项前不要有空行，直接跟在父列表项后面
4. **检查渲染效果**：编写完成后，建议检查前端渲染效果，确保格式正确
5. **使用 Markdown 预览工具**：可以使用 Markdown 预览工具检查格式是否正确

## 相关文件索引

- Markdown 渲染实现：`app/controllers/concerns/markdown_renderable.rb`
- 项目基础规则：`.cursor/rules/base.mdc`
