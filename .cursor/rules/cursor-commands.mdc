---
description: Cursor 指令文件（.md 文件）创建和管理指南。当用户提到"指令"、"指令文件"、"创建指令"、"管理指令"、"cursor 指令"、".md 文件"等关键词，或需要创建、修改、管理 .cursor/commands/ 目录下的指令文件时参考此规则。说明指令文件的作用、格式、使用场景和最佳实践。注意：这是关于指令文件的指南，不是规则文件（cursor-rules）的指南。
alwaysApply: false
---

# Cursor 指令文件创建指南

## 指令文件的作用

Cursor 指令文件（`.md` 文件）用于定义 AI 助手的工作方式和行为模式。与规则文件（`.mdc`）不同，指令文件不是提供开发规范，而是定义 AI 在特定场景下的工作流程、执行方式和行为准则。

## 指令文件与规则文件的区别

### 规则文件（`.mdc` 文件）

- **位置**：`.cursor/rules/` 目录
- **作用**：提供开发规范和指导
- **内容**：技术规范、最佳实践、代码规范等
- **应用**：AI 在开发相关功能时自动参考

### 指令文件（`.md` 文件）

- **位置**：`.cursor/commands/` 目录
- **作用**：定义 AI 的工作方式和行为模式
- **内容**：工作流程、执行方式、行为准则等
- **应用**：AI 在特定场景下按照指令执行

## 指令文件位置

所有指令文件存放在 `.cursor/commands/` 目录下，文件扩展名为 `.md`。

## 指令文件格式

### 基本结构

指令文件使用 Markdown 格式，不需要头部元数据字段（与规则文件不同）：

```markdown
# 指令文件标题

指令内容...
```

### 格式特点

- ✅ **使用 Markdown 格式**：`.md` 文件，标准 Markdown 语法
- ✅ **不需要元数据**：不需要 `description` 和 `alwaysApply` 字段
- ✅ **清晰的标题结构**：使用 Markdown 标题组织内容
- ✅ **明确的指令说明**：使用清晰的步骤和规则

## 指令文件内容组织

### 推荐结构

```markdown
# 指令文件标题

## 触发场景

说明何时应该使用这个指令...

## 核心原则

1. 原则 1
2. 原则 2

## 工作流程

### 1. 步骤 1

详细说明...

### 2. 步骤 2

详细说明...

## 重要规则

- 规则 1
- 规则 2

## 注意事项

1. 注意事项 1
2. 注意事项 2
```

## 创建新指令文件的步骤

### 1. 确定指令文件主题

- 需要定义什么工作方式？
- 需要规范什么行为模式？
- 这个指令适用于什么场景？

### 2. 创建指令文件

在 `.cursor/commands/` 目录下创建新的 `.md` 文件：

```bash
touch .cursor/commands/my-command.md
```

### 3. 编写指令内容

指令内容应该包括：

- **触发场景**：说明何时应该使用这个指令
- **核心原则**：指令遵循的核心原则
- **工作流程**：详细的工作步骤和流程
- **重要规则**：必须遵守的规则和限制
- **注意事项**：重要的注意事项和陷阱
- **示例**：使用示例和反例对比

### 4. 更新相关引用

如果创建了新指令文件，可以更新：

- `workspace.mdc`：在相关部分添加指令文件的引用（如果是项目特定指令）
- 项目文档：如果指令文件有对应的文档，添加链接

## 指令文件命名规范

### 命名建议

- ✅ 使用小写字母和连字符：`my-command.md`
- ✅ 使用描述性名称：`autonomous-work.md`、`code-review.md`
- ✅ 避免使用下划线：`my_command.md`（不推荐）
- ✅ 避免使用空格：`my command.md`（不推荐）

### 命名示例

```
✅ autonomous-work.md      # 自主工作模式
✅ code-review.md          # 代码审查指令
✅ refactoring.md          # 重构指令
✅ testing.md              # 测试指令

❌ Autonomous-Work.md     # 不应使用大写
❌ autonomous_work.md      # 避免使用下划线
❌ my command.md          # 避免使用空格
```

## 指令文件编写最佳实践

### 1. 明确触发场景

- ✅ **清晰说明**：明确说明何时应该使用这个指令
- ✅ **关键词识别**：列出可能触发指令的关键词或场景
- ✅ **使用示例**：提供使用示例

### 2. 详细的工作流程

- ✅ **步骤清晰**：使用编号列表或标题组织步骤
- ✅ **详细说明**：每个步骤都要有详细的说明
- ✅ **顺序明确**：明确步骤的执行顺序
- ✅ **条件说明**：说明各种条件下的处理方式

### 3. 重要的规则和限制

- ✅ **必须遵守**：明确标注必须遵守的规则
- ✅ **禁止行为**：明确列出禁止的行为
- ✅ **警告标识**：使用 ⚠️ 标识重要警告
- ✅ **示例对比**：提供正确和错误的示例对比

### 4. 注意事项

- ✅ **常见陷阱**：列出常见的陷阱和错误
- ✅ **边界情况**：说明边界情况的处理方式
- ✅ **性能考虑**：如果有性能相关注意事项，明确说明

## 指令文件维护

- ✅ **定期审查**：检查指令文件是否仍然适用
- ✅ **更新内容**：随着项目发展及时更新指令
- ✅ **合并重复**：避免多个指令文件包含重复内容
- ✅ **测试验证**：确保指令文件描述的行为与实际一致

## 现有指令文件参考

### 工作模式指令

- **autonomous-work.md**：自主工作模式指令，定义 AI 在自主工作场景下的工作流程和行为准则

## 注意事项

1. **指令文件不是规则文件**：指令文件定义工作方式，规则文件提供开发规范

2. **指令文件不需要元数据**：与规则文件不同，指令文件不需要 `description` 和 `alwaysApply` 字段

3. **指令文件应该清晰**：指令文件应该使用清晰的语言和结构，确保 AI 能够正确理解和执行

4. **及时更新**：随着项目发展，及时更新指令文件，确保内容准确

5. **避免重复**：检查是否已有相关指令文件，避免创建重复的指令

## 相关文件索引

- 规则文件创建指南：`.cursor/rules/cursor-rules.mdc`
- 通用基础规则：`.cursor/rules/base.mdc`
- 项目特定规则：`.cursor/rules/workspace.mdc`
