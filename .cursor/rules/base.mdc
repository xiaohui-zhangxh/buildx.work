---
description: 通用基础规则。包含文档更新规范、常用工具使用方法等通用规则，适用于所有项目。
alwaysApply: true
---

# 通用基础规则

本文档包含适用于所有项目的通用规则。项目特定规则请参考 `workspace.mdc`。

## 🤖 AI 对话行为规范

### 对话开始时的行为

**重要**：当开始与用户对话时，如果任务不明确或与项目无关，AI 应该：

1. **主动提醒用户可以做什么**：
   - 列出可用的指令和功能
   - 说明工作区的项目结构（如适用）
   - 提供帮助和指导

2. **列出可用指令**：
   - 查看 `.cursor/commands/` 目录下的指令文件
   - 向用户说明如何使用这些指令
   - 提供指令的使用示例

3. **说明工作区结构**（如适用）：
   - 介绍工作区中的项目或子项目（如果存在）
   - 说明每个项目的主要任务
   - 提供项目文档链接

### 可用指令列表

**指令文件位置**：`.cursor/commands/`

**在 Cursor 中执行指令**：使用斜线命令，例如 `/continue-project-work`

当前可用的指令：

1. 🚀 **继续完成项目工作** (`00-continue.md`)
   - **用途**：继续完成指定项目的下一步工作
   - **使用方式**：
     - **Cursor 斜线命令**：`/continue-project-work [项目：项目名]`
     - **直接描述**：`继续完成项目工作，项目：[项目名]`
     - **不指定项目**：`/continue-project-work` 或 `继续完成项目工作`（AI 会列出所有项目让你选择）
   - **说明**：通用指令，适用于所有项目

2. 🎯 **智能继续工作** (`01-smart-go.md`)
   - **用途**：智能继续执行当前任务，自主决定下一步工作
   - **使用方式**：`/smart-go`
   - **说明**：直接继续工作，不需要制定计划或等待确认

3. 🤖 **自主工作** (`02-autonomous-work.md`)
   - **用途**：AI 自主完成项目工作
   - **使用方式**：`/autonomous-work`

4. 📝 **日报管理** (`03-daily-report.md`)
   - **用途**：创建、查看、更新日报
   - **使用方式**：`/daily-report`

5. 💼 **商业价值分析** (`70-business-analysis.md`) ⭐
   - **用途**：创建新项目时自动进行商业价值分析（投资人/用户视角）
   - **触发场景**：用户提到"创建新项目"、"项目规划"、"商业价值分析"等
   - **说明**：AI 应该主动分析，不要等待反馈
   - **指令文件**：`.cursor/commands/70-business-analysis.md`

5. 📚 **其他指令**：
   - 查看 `.cursor/commands/` 目录了解所有可用指令
   - 使用斜线命令执行：`/指令文件名`（不含 .md 扩展名）

### 提示用户的标准格式

**重要**：当任务不明确或与项目无关时，AI 必须使用 emoji 图标来提高内容的辨识度和可读性。所有提示内容都应该适当使用 emoji，包括但不限于：
- 使用 🤔 表示思考/询问
- 使用 📋 表示列表/指令
- 使用 📁 表示项目/工作区
- 使用 💡 表示提示/建议
- 使用 📖 表示文档/参考
- 使用 ✅ 表示可执行的任务
- 使用 🚀、🤖、📝 等表示不同类型的指令

当任务不明确或与项目无关时，AI 应该使用以下格式提示用户（**必须包含 emoji**）：

```
🤔 任务不明确，我可以帮你：

📋 **可用指令**：
1. 🚀 继续完成项目工作
   - **Cursor 斜线命令**：`/continue-project-work [项目：项目名]`
   - **直接描述**：`继续完成项目工作，项目：[项目名]`
   - **不指定项目**：`/continue-project-work` 或 `继续完成项目工作`（我会列出所有项目让你选择）
   - **指令文件**：`.cursor/commands/00-continue.md`

2. 🎯 智能继续工作
   - **Cursor 斜线命令**：`/smart-go`
   - **说明**：智能继续执行当前任务，自主决定下一步工作
   - **指令文件**：`.cursor/commands/01-smart-go.md`

3. 🤖 自主工作
   - **Cursor 斜线命令**：`/autonomous-work`
   - **说明**：AI 自主完成项目工作
   - **指令文件**：`.cursor/commands/02-autonomous-work.md`

4. 📝 日报管理
   - **Cursor 斜线命令**：`/daily-report`
   - **说明**：创建、查看、更新日报
   - **指令文件**：`.cursor/commands/03-daily-report.md`

📁 **工作区项目**：
[根据 workspace.mdc 中的项目列表动态生成，如适用]

💡 **我可以帮你**：
- ✅ 继续完成项目的下一步工作（使用指令：继续完成项目工作）
- ✅ 更新项目文档和进度
- ✅ 管理任务清单和状态
- ✅ 创建或管理日报
- ✅ 其他项目相关任务

📖 **查看指令详情**：
- 🚀 继续完成项目工作：`.cursor/commands/00-continue.md`（如果存在）
- 🎯 智能继续工作：`.cursor/commands/01-smart-go.md`
- 🤖 自主工作：`.cursor/commands/02-autonomous-work.md`
- 📝 日报管理：`.cursor/commands/03-daily-report.md`
- 💼 商业价值分析：`.cursor/commands/70-business-analysis.md` ⭐

请告诉我你想做什么，或者使用上面的指令。
```

### 判断任务是否明确的标准

**任务明确的情况**：
- 用户明确指定了要执行的具体任务
- 用户指定了项目和具体工作
- 用户的问题与项目直接相关

**任务不明确的情况**：
- 用户只是打招呼或询问"你好"
- 用户的问题与项目无关
- 用户没有指定要做什么
- 用户询问"我能做什么"或"你可以做什么"

**与项目无关的情况**：
- 问题与当前工作区项目无关
- 问题是一般性的编程或技术问题（与当前项目无关）
- 问题是闲聊或无关话题

---

## 📝 文档更新规范

### 何时更新文档

1. **技术决策**：记录重要的技术选择和架构决策
2. **开发进度**：更新项目进度和里程碑
3. **开发笔记**：记录遇到的问题和解决方案
4. **功能完成**：更新功能状态和完成情况

### 如何更新文档

1. **模块内文档**：在对应模块的文件夹中更新相关文档
2. **跨模块文档**：在文档根目录或共享位置更新
3. **技术决策**：记录在技术文档或开发者指南中
4. **项目状态**：及时更新项目状态和进度信息

**注意**：更新日志文件创建和管理规范请参考 `.cursor/rules/changelog.mdc`。

---

## 🛠️ 常用工具

### 获取当前时间

当需要获取当前系统时间时，可以根据操作系统和已安装的工具选择合适的方法：

#### macOS/Linux（使用 date 命令）

- **日期**：`date +%Y-%m-%d`
- **完整时间**：`date "+%Y-%m-%d %H:%M:%S"`
- **ISO 格式**：`date -u +%Y-%m-%dT%H:%M:%SZ` 或 `date -Iseconds`（GNU date）

#### Windows（使用 PowerShell）

- **日期**：`powershell -Command "Get-Date -Format 'yyyy-MM-dd'"`
- **完整时间**：`powershell -Command "Get-Date -Format 'yyyy-MM-dd HH:mm:ss'"`
- **ISO 格式**：`powershell -Command "Get-Date -Format 'yyyy-MM-ddTHH:mm:ssZ'"`

#### Python（如果已安装）

- **日期**：`python -c "from datetime import datetime; print(datetime.now().strftime('%Y-%m-%d'))"`
- **完整时间**：`python -c "from datetime import datetime; print(datetime.now().strftime('%Y-%m-%d %H:%M:%S'))"`
- **ISO 格式**：`python -c "from datetime import datetime; print(datetime.now().isoformat())"`

#### Ruby（如果已安装）

- **日期**：`ruby -e "puts Time.now.strftime('%Y-%m-%d')"`
- **完整时间**：`ruby -e "puts Time.now.strftime('%Y-%m-%d %H:%M:%S')"`
- **ISO 格式**：`ruby -e "puts Time.now.iso8601"`

**建议**：优先使用系统自带的命令（macOS/Linux 的 `date` 或 Windows 的 PowerShell），这些命令在所有系统上都可用。

常用于更新文档中的"最后更新"日期等场景。

#### 获取其他日期格式

- **周数**：`date +"%Y-W%V"`（格式：YYYY-WXX，如 2025-W01）
- **季度**：根据月份计算（1-3月=Q1，4-6月=Q2，7-9月=Q3，10-12月=Q4）
- **月份**：`date +"%Y-%m"`（格式：YYYY-MM）

#### 执行规则

1. **必须执行命令**：需要日期/时间时，必须运行命令获取真实值
2. **不要假设**：不要使用记忆中的日期或假设当前日期
3. **格式统一**：使用标准格式（YYYY-MM-DD）确保一致性
4. **时区考虑**：使用系统默认时区，如需特定时区可指定（如 `TZ=Asia/Shanghai date`）

### 操作者身份获取规则（重要）

**重要**：当需要知道操作者本人是谁时，必须通过 git 命令获取提交人身份信息，而不是使用假设或记忆中的信息。

#### 获取操作者身份

- **命令**：`git config user.name`（获取用户名）
- **命令**：`git config user.email`（获取用户邮箱）
- **使用场景**：
  - 需要记录操作者信息时
  - 需要在文档中标注作者时
  - 需要了解当前操作者身份时
  - 需要在更新日志中记录操作者时

#### 获取 Git 提交历史中的操作者信息

- **命令**：`git log -1 --pretty=format:"%an <%ae>"`（获取最后一次提交的作者）
- **命令**：`git log -1 --pretty=format:"%cn <%ce>"`（获取最后一次提交的提交者）
- **使用场景**：
  - 查看最近的提交者信息
  - 了解项目的操作历史
  - 确认操作者身份

#### 执行规则

1. **必须执行命令**：需要操作者身份时，必须运行 git 命令获取真实值
2. **不要假设**：不要使用记忆中的信息或假设操作者身份
3. **优先使用配置**：优先使用 `git config` 获取当前配置的身份信息
4. **备用方案**：如果 git config 没有配置，可以查看最近的提交历史


---

## 📋 通用开发规范

### 代码质量

- 遵循语言和框架的最佳实践
- 使用代码检查工具（如 RuboCop、ESLint 等）
- 编写测试覆盖
- 文档先行原则

### 文档管理

- 保持文档结构清晰
- 及时更新文档
- 记录技术决策和问题解决方案
- 避免重复文档内容

---

## 文件操作规范

### 创建新内容文件

1. 确认当前项目目录
2. 确认文件保存路径（根据项目规范）
3. 检查文件是否已存在，避免重复
4. 创建文件时，在文件头部添加元数据（根据项目规范）

**注意**：具体的文件操作规范请参考 `workspace.mdc` 中的项目特定规则。

### 更新进度文件

1. 确认当前项目目录
2. 打开项目的进度文件（根据项目规范，如 `PROGRESS.md`、`TODO.md` 等）
3. 找到对应任务行
4. 更新状态、完成日期等信息
5. 更新统计数据部分（如适用）

**注意**：具体的进度文件名称和格式请参考 `workspace.mdc` 中的项目特定规则。

### 创建任务计划

1. 确认当前项目目录
2. 在项目的任务计划目录创建对应计划文件（如适用）
3. 参考 `[项目目录]/README.md` 中的内容清单（如适用）
4. 根据优先级和时间安排任务
5. 在计划文件中标注任务来源（如适用）

**注意**：具体的任务计划规范请参考 `workspace.mdc` 中的项目特定规则。

---

## 任务状态定义

通用任务状态包括：

- **待开始**：任务已规划，尚未开始
- **进行中**：任务正在执行中
- **已完成**：任务已完成
- **已暂停**：任务暂时停止
- **已取消**：任务取消，不再执行

**可选状态**（根据项目需要）：
- **已发布**：内容已发布到目标平台（适用于需要发布的项目）

**注意**：具体的任务状态定义和管理规则请参考 `workspace.mdc` 中的项目特定规则。

---

## 重要提醒

1. **必须遵守文件位置规范**：所有文件必须保存在指定位置（根据项目规范）
2. **及时更新进度**：每次任务状态变化都要更新进度记录（如适用）
3. **保持文件同步**：确保记录文件与内容文件一致
4. **定期检查**：定期检查文件结构和记录
5. **备份重要文件**：定期备份重要文件和记录

## 相关规则文件

### 通用脚本目录

- **位置**：`.scripts/`（根目录隐藏文件夹）
- **说明**：存放所有项目通用的脚本工具
- **使用**：参考 `.scripts/README.md`

### 临时文件目录

- **位置**：`tmp/`（根目录）
- **说明**：用于存储临时文件、临时脚本、临时进度等
- **重要**：此目录不会被提交到 git（已添加到 .gitignore）
- **使用场景**：
  - 临时执行脚本
  - 临时保存数据文件
  - 临时保存工作进度
  - 测试文件
- **清理建议**：定期清理临时文件，避免占用过多空间

---

**规则版本**：v3.3  
**最后更新**：2025-11-26  
**变更说明**：
- v3.0：重构规则文件，将项目特定规则提取到 `workspace.mdc`，`base.mdc` 仅保留通用规则
- v3.1：精简通用规则，融合新规则（文档更新规范、常用工具、通用开发规范），移除项目特定内容（内容质量复查、配图管理等）
- v3.2：进一步通用化，移除对多项目结构的假设，使规则适用于单项目和多项目工作区
- 项目特定规则请参考 `workspace.mdc`
