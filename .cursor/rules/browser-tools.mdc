---
description: 浏览器工具使用规则和最佳实践。使用 Cursor 内置浏览器进行页面操作、调试、登录注册等场景时的规范。
alwaysApply: false
---

# 浏览器工具使用规则

当需要查看界面效果、验证 UI 实现、调试前端问题、进行网页操作（如登录、查询）时，如果已配置了浏览器控制相关的 MCP 服务，应该使用 Cursor 内置浏览器进行调试。

## 重要原则

**必须使用 Cursor 内置浏览器**：当用户说"打开浏览器"、"用浏览器访问"、"在浏览器中打开"等时，必须使用 Cursor 内置浏览器（通过 MCP 浏览器工具），而不是打开新的 Chrome 浏览器窗口。

## 使用方式

- 使用 `mcp_cursor-ide-browser_browser_navigate` 等浏览器工具
- 在 Cursor 左侧的内置浏览器中操作
- 不会打开新的 Chrome 窗口

## 可用的工具

（具体工具取决于已配置的 MCP 服务）

- `browser_navigate` - 导航到页面
- `browser_snapshot` - 查看页面快照（结构化数据）
- `browser_take_screenshot` - 截图功能（图像内容）
- `browser_click` - 点击页面元素
- `browser_type` - 输入文本
- `browser_hover` - 悬停元素
- `browser_select_option` - 选择下拉选项
- `browser_press_key` - 按键操作
- 其他页面交互功能

## 了解页面内容的正确方法

**重要**：在了解浏览器页面内容时，应该**结合使用浏览器快照（snapshot）和浏览器截图（screenshot）**，以提高精准度。

### 为什么需要结合使用

1. **浏览器快照（snapshot）**：
   - 提供页面的结构化数据（DOM 结构、元素引用、可交互元素等）
   - 适合用于定位元素、获取元素引用（ref）
   - 可以了解页面的逻辑结构
   - **缺点**：无法看到视觉内容（图片、验证码、样式等）

2. **浏览器截图（screenshot）**：
   - 提供页面的视觉内容（图像、验证码、样式、布局等）
   - 适合用于识别验证码、查看视觉效果、确认页面状态
   - 可以了解页面的实际外观
   - **缺点**：无法直接获取元素引用，无法进行交互

### 使用策略

**标准流程**：

1. **初始了解**：先使用 `browser_snapshot` 获取页面结构，了解有哪些可交互元素
2. **视觉确认**：使用 `browser_take_screenshot` 查看页面实际外观
3. **结合分析**：结合快照和截图的信息，准确定位需要操作的元素
4. **执行操作**：使用快照中的元素引用（ref）进行交互操作

**具体场景**：

- **查找元素**：先用快照找到元素引用，再用截图确认视觉位置
- **识别验证码**：使用截图识别验证码内容，使用快照找到输入框引用
- **确认页面状态**：快照确认逻辑状态，截图确认视觉状态
- **调试布局问题**：截图查看实际效果，快照查看 DOM 结构

### 最佳实践

- ✅ **同时使用**：在需要精确操作时，同时获取快照和截图
- ✅ **先快照后截图**：先了解结构，再确认视觉
- ✅ **关键操作前确认**：在执行重要操作（如登录、提交）前，结合快照和截图确认状态
- ❌ **不要只依赖一种**：不要只使用快照或只使用截图，应该结合使用

## 使用场景

- "帮我打开 XXX 网站" → 使用内置浏览器
- "用浏览器查询 XXX" → 使用内置浏览器
- "在浏览器中打开 XXX" → 使用内置浏览器
- "帮我访问商标局网站" → 使用内置浏览器
- 调试前端界面问题
- 验证 UI 实现效果
- 进行网页登录、注册等操作

## 登录注册时的验证码处理

当需要登录或注册时，必须遵循以下流程：

1. **填写登录信息**：填写用户名、密码等基本信息
2. **检查验证码**：
   - 使用 `browser_take_screenshot` 截取页面，查看是否需要输入验证码
   - 使用 `browser_snapshot` 获取验证码输入框的引用
3. **识别验证码**：
   - 从截图中识别验证码内容（如简单的数字、字母验证码）
   - 如果能够识别，使用快照中的输入框引用自动输入
   - 如果无法识别（如复杂的图形验证码、滑块验证等），告知用户需要手动输入
4. **完成登录**：在用户输入验证码后（或自动识别后），点击登录按钮完成登录

**验证码处理原则**：
- ✅ **优先自动识别**：如果验证码清晰可读，尝试识别并自动输入
- ✅ **结合使用**：使用截图识别验证码，使用快照获取输入框引用
- ✅ **截图检查**：在填写登录信息后，先截图确认是否有验证码
- ❌ **不要跳过**：不要忽略验证码，必须处理验证码才能完成登录
- ⚠️ **无法识别时**：如果验证码过于复杂无法识别，明确告知用户需要手动输入

## 注意事项

- 不同的 MCP 服务可能提供不同的工具和功能，请根据实际配置的 MCP 服务使用相应的工具
- 如果未配置浏览器控制相关的 MCP 服务，可以使用其他方式（如手动打开浏览器）进行调试
- **必须使用 Cursor 内置浏览器，不要打开新的 Chrome 浏览器窗口**
- **始终结合使用快照和截图，提高操作的精准度**
