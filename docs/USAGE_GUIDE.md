# BuildX.work ä½¿ç”¨æŒ‡å—

> è¯¦ç»†è¯´æ˜å¦‚ä½•ä½¿ç”¨ BuildX.work ä½œä¸ºåŸºç¡€è®¾æ–½æ¨¡æ¿åˆ›å»ºå’Œå¼€å‘ä¸šåŠ¡é¡¹ç›®

## ğŸ“š ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [åˆ›å»ºæ–°é¡¹ç›®](#åˆ›å»ºæ–°é¡¹ç›®)
3. [æ‰©å±•åŸºç¡€è®¾æ–½åŠŸèƒ½](#æ‰©å±•åŸºç¡€è®¾æ–½åŠŸèƒ½)
4. [æ›´æ–°åŸºç¡€è®¾æ–½](#æ›´æ–°åŸºç¡€è®¾æ–½)
5. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Ruby 3.3.5
- Bundler
- Node.jsï¼ˆç”¨äº Tailwind CSSï¼‰
- SQLite3ï¼ˆå¼€å‘/æµ‹è¯•ï¼‰
- Git

### å·¥ä½œæµç¨‹æ¦‚è§ˆ

```
1. Fork/Clone BuildX.work â†’ åˆ›å»ºæ–°é¡¹ç›®
2. é€šè¿‡ Module/Concern æ‰©å±•åŠŸèƒ½ â†’ æ·»åŠ ä¸šåŠ¡é€»è¾‘
3. å®šæœŸ git merge æ›´æ–° â†’ åŒæ­¥åŸºç¡€è®¾æ–½æ›´æ–°
```

---

## åˆ›å»ºæ–°é¡¹ç›®

### æ–¹æ³•ä¸€ï¼šFork æ–¹å¼ï¼ˆæ¨èï¼‰

å¦‚æœä½ ä½¿ç”¨ GitHub/GitLab ç­‰ Git æ‰˜ç®¡æœåŠ¡ï¼š

```bash
# 1. Fork buildx.work ä»“åº“åˆ°ä½ çš„è´¦æˆ·
# åœ¨ GitHub/GitLab ä¸Šç‚¹å‡» Fork æŒ‰é’®

# 2. å…‹éš†ä½ çš„ Fork
git clone https://github.com/your-username/buildx.work.git my-new-project
cd my-new-project

# 3. æ·»åŠ ä¸Šæ¸¸ä»“åº“ï¼ˆç”¨äºåç»­æ›´æ–°ï¼‰
git remote add upstream https://github.com/xiaohui-zhangxh/buildx.work.git

# 4. å®‰è£…ä¾èµ–
bundle install
npm install

# 5. è®¾ç½®æ•°æ®åº“
bin/rails db:setup

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bin/dev
```

### æ–¹æ³•äºŒï¼šClone æ–¹å¼ï¼ˆæœ¬åœ°å¼€å‘ï¼‰

å¦‚æœä½ åœ¨æœ¬åœ°å¼€å‘ï¼š

```bash
# 1. å…‹éš†åŸºç¡€è®¾æ–½é¡¹ç›®
git clone /path/to/buildx.work my-new-project
cd my-new-project

# 2. åˆå§‹åŒ– Git ä»“åº“ï¼ˆå¦‚æœéœ€è¦ç‹¬ç«‹ä»“åº“ï¼‰
rm -rf .git
git init
git add .
git commit -m "Initial commit from buildx.work"

# 3. æ·»åŠ ä¸Šæ¸¸ä»“åº“ï¼ˆç”¨äºåç»­æ›´æ–°ï¼‰
git remote add upstream /path/to/buildx.work

# 4. å®‰è£…ä¾èµ–
bundle install
npm install

# 5. è®¾ç½®æ•°æ®åº“
bin/rails db:setup

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bin/dev
```

### é¡¹ç›®ç»“æ„è¯´æ˜

åˆ›å»ºæ–°é¡¹ç›®åï¼Œä½ ä¼šå¾—åˆ°ä»¥ä¸‹ç»“æ„ï¼š

```
my-new-project/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ user.rb              # åŸºç¡€è®¾æ–½ï¼šç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ concerns/            # åŸºç¡€è®¾æ–½ï¼šConcern æ¨¡å—
â”‚   â”‚   â””â”€â”€ ...                  # åœ¨è¿™é‡Œæ·»åŠ ä½ çš„ä¸šåŠ¡æ¨¡å‹
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ application_controller.rb  # åŸºç¡€è®¾æ–½ï¼šåŸºç¡€æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ ...                  # åœ¨è¿™é‡Œæ·»åŠ ä½ çš„ä¸šåŠ¡æ§åˆ¶å™¨
â”‚   â””â”€â”€ ...
â”œâ”€â”€ config/
â”‚   â””â”€â”€ initializers/
â”‚       â””â”€â”€ extensions.rb        # æ‰©å±•åŠ è½½æœºåˆ¶ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â””â”€â”€ ...
```

---

## æ‰©å±•åŸºç¡€è®¾æ–½åŠŸèƒ½

### æ ¸å¿ƒåŸåˆ™

**âœ… åº”è¯¥åšçš„ï¼š**
- é€šè¿‡ Module/Concern æ‰©å±•åŠŸèƒ½
- åœ¨ `app/models/concerns/` æˆ– `app/controllers/concerns/` ä¸­åˆ›å»ºæ‰©å±•æ¨¡å—
- ä½¿ç”¨ `include` å¼•å…¥æ‰©å±•æ¨¡å—

**âŒ ä¸åº”è¯¥åšçš„ï¼š**
- ç›´æ¥ä¿®æ”¹åŸºç¡€è®¾æ–½ä»£ç ï¼ˆå¦‚ `app/models/user.rb`ï¼‰
- åœ¨åŸºç¡€è®¾æ–½æ–‡ä»¶ä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘
- åˆ é™¤æˆ–é‡å‘½ååŸºç¡€è®¾æ–½æ–‡ä»¶

### æ‰©å±• User æ¨¡å‹

#### 1. åˆ›å»ºæ‰©å±•æ¨¡å—

```ruby
# app/models/concerns/user_extensions.rb
module UserExtensions
  extend ActiveSupport::Concern

  included do
    # æ·»åŠ ä¸šåŠ¡ç‰¹å®šçš„å…³è”
    has_many :workspaces, dependent: :destroy
    has_many :ai_chats, dependent: :destroy
    
    # æ·»åŠ ä¸šåŠ¡ç‰¹å®šçš„éªŒè¯
    validates :business_field, presence: true
  end

  # æ·»åŠ ä¸šåŠ¡ç‰¹å®šçš„æ–¹æ³•
  def workspace_count
    workspaces.count
  end
end
```

#### 2. è‡ªåŠ¨åŠ è½½æ‰©å±•

æ‰©å±•æ¨¡å—ä¼šè‡ªåŠ¨åŠ è½½ï¼ˆé€šè¿‡ `config/initializers/extensions.rb`ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨å¼•å…¥ã€‚

### æ‰©å±• Controller

#### 1. åˆ›å»º Controller æ‰©å±•

```ruby
# app/controllers/concerns/application_controller_extensions.rb
module ApplicationControllerExtensions
  extend ActiveSupport::Concern

  included do
    # æ·»åŠ ä¸šåŠ¡ç‰¹å®šçš„ before_action
    before_action :set_business_context
    
    # æ·»åŠ ä¸šåŠ¡ç‰¹å®šçš„ helper_method
    helper_method :current_workspace
  end

  private

    def set_business_context
      # ä¸šåŠ¡é€»è¾‘
    end

    def current_workspace
      # ä¸šåŠ¡é€»è¾‘
    end
end
```

#### 2. è‡ªåŠ¨åŠ è½½æ‰©å±•

Controller æ‰©å±•ä¹Ÿä¼šè‡ªåŠ¨åŠ è½½ã€‚

### æ‰©å±•å…¶ä»–ç»„ä»¶

#### æ‰©å±• View Helper

```ruby
# app/helpers/application_helper_extensions.rb
module ApplicationHelperExtensions
  def business_specific_helper
    # ä¸šåŠ¡é€»è¾‘
  end
end
```

#### æ‰©å±• Mailer

```ruby
# app/mailers/concerns/mailer_extensions.rb
module MailerExtensions
  extend ActiveSupport::Concern

  included do
    # æ·»åŠ ä¸šåŠ¡ç‰¹å®šçš„é‚®ä»¶é…ç½®
    default from: 'business@example.com'
  end
end
```

### æ‰©å±•ç¤ºä¾‹

æŸ¥çœ‹ [å­é¡¹ç›®æ¨¡æ¿](../buildx.run/template-project/) äº†è§£å®Œæ•´çš„æ‰©å±•ç¤ºä¾‹ã€‚

---

## æ›´æ–°åŸºç¡€è®¾æ–½

### æ›´æ–°æµç¨‹

å½“åŸºç¡€è®¾æ–½é¡¹ç›®ï¼ˆbuildx.workï¼‰æœ‰æ›´æ–°æ—¶ï¼Œä½ éœ€è¦åŒæ­¥åˆ°å­é¡¹ç›®ï¼š

```bash
# 1. ç¡®ä¿å½“å‰åˆ†æ”¯æ˜¯å¹²å‡€çš„ï¼ˆæ²¡æœ‰æœªæäº¤çš„æ›´æ”¹ï¼‰
git status

# 2. è·å–ä¸Šæ¸¸æ›´æ–°
git fetch upstream

# 3. åˆå¹¶ä¸Šæ¸¸æ›´æ–°
git merge upstream/main

# 4. å¦‚æœæœ‰å†²çªï¼Œè§£å†³å†²çª
# Git ä¼šæ ‡è®°å†²çªçš„æ–‡ä»¶ï¼Œæ‰‹åŠ¨ç¼–è¾‘è§£å†³å†²çª

# 5. æäº¤åˆå¹¶
git add .
git commit -m "Merge upstream: update infrastructure"

# 6. æµ‹è¯•åº”ç”¨
bin/rails test
bin/dev  # æ‰‹åŠ¨æµ‹è¯•

# 7. æ¨é€æ›´æ–°
git push
```

### å¤„ç†åˆå¹¶å†²çª

#### å†²çªç±»å‹

1. **åŸºç¡€è®¾æ–½æ–‡ä»¶å†²çª**ï¼ˆå¦‚ `app/models/user.rb`ï¼‰
   - **ç­–ç•¥**ï¼šä¼˜å…ˆä¿ç•™åŸºç¡€è®¾æ–½çš„ä»£ç 
   - **åŸå› **ï¼šåŸºç¡€è®¾æ–½ä»£ç æ˜¯æ ‡å‡†å®ç°ï¼Œåº”è¯¥ä¿æŒä¸€è‡´

2. **é…ç½®æ–‡ä»¶å†²çª**ï¼ˆå¦‚ `config/routes.rb`ï¼‰
   - **ç­–ç•¥**ï¼šåˆå¹¶åŒæ–¹çš„æ›´æ”¹
   - **åŸå› **ï¼šè·¯ç”±é…ç½®éœ€è¦åŒæ—¶ä¿ç•™åŸºç¡€è®¾æ–½å’Œä¸šåŠ¡è·¯ç”±

3. **æ‰©å±•æ¨¡å—å†²çª**ï¼ˆå¦‚ `app/models/concerns/user_extensions.rb`ï¼‰
   - **ç­–ç•¥**ï¼šä¿ç•™ä½ çš„ä¸šåŠ¡æ‰©å±•
   - **åŸå› **ï¼šæ‰©å±•æ¨¡å—æ˜¯ä¸šåŠ¡ç‰¹å®šçš„ï¼Œä¸åº”è¯¥è¢«è¦†ç›–

### æ›´æ–°æ£€æŸ¥æ¸…å•

- [ ] è·å–ä¸Šæ¸¸æ›´æ–°
- [ ] åˆå¹¶æ›´æ–°
- [ ] è§£å†³æ‰€æœ‰å†²çª
- [ ] è¿è¡Œæµ‹è¯•ï¼ˆ`bin/rails test`ï¼‰
- [ ] æ‰‹åŠ¨æµ‹è¯•å…³é”®åŠŸèƒ½
- [ ] æ£€æŸ¥ä»£ç è´¨é‡ï¼ˆ`bin/rubocop`ï¼‰
- [ ] æäº¤å¹¶æ¨é€æ›´æ–°

---

## æœ€ä½³å®è·µ

### 1. ä»£ç ç»„ç»‡

```
app/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ concerns/
â”‚   â”‚   â”œâ”€â”€ user_extensions.rb        # User æ¨¡å‹æ‰©å±•
â”‚   â”‚   â””â”€â”€ ...                       # å…¶ä»–æ‰©å±•
â”‚   â”œâ”€â”€ business_model.rb            # ä¸šåŠ¡æ¨¡å‹
â”‚   â””â”€â”€ ...
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ concerns/
â”‚   â”‚   â””â”€â”€ application_controller_extensions.rb
â”‚   â”œâ”€â”€ business_controller.rb       # ä¸šåŠ¡æ§åˆ¶å™¨
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

### 2. å‘½åè§„èŒƒ

- **æ‰©å±•æ¨¡å—**ï¼šä½¿ç”¨ `*Extensions` åç¼€ï¼ˆå¦‚ `UserExtensions`ï¼‰
- **ä¸šåŠ¡æ¨¡å‹**ï¼šä½¿ç”¨ä¸šåŠ¡é¢†åŸŸå‘½åï¼ˆå¦‚ `Workspace`ã€`Chat`ï¼‰
- **ä¸šåŠ¡æ§åˆ¶å™¨**ï¼šä½¿ç”¨ RESTful å‘½åï¼ˆå¦‚ `WorkspacesController`ï¼‰

### 3. åŠŸèƒ½æå–

å¦‚æœå‘ç°ä¸šåŠ¡åŠŸèƒ½å¯ä»¥è¢«å¤šä¸ªé¡¹ç›®å¤ç”¨ï¼š

1. **è¯„ä¼°é€šç”¨æ€§**ï¼šæ˜¯å¦çœŸçš„é€šç”¨ï¼Ÿæ˜¯å¦é€‚åˆæ‰€æœ‰é¡¹ç›®ï¼Ÿ
2. **æå–åˆ°åŸºç¡€è®¾æ–½**ï¼šå¦‚æœé€šç”¨ï¼Œæäº¤ PR åˆ° buildx.work
3. **æ›´æ–°æ–‡æ¡£**ï¼šè®°å½•æ–°åŠŸèƒ½çš„ä½¿ç”¨æ–¹æ³•

### 4. æµ‹è¯•ç­–ç•¥

- **åŸºç¡€è®¾æ–½åŠŸèƒ½**ï¼šç”± buildx.work ç»´æŠ¤æµ‹è¯•
- **ä¸šåŠ¡åŠŸèƒ½**ï¼šåœ¨ä½ çš„é¡¹ç›®ä¸­ç¼–å†™æµ‹è¯•
- **é›†æˆæµ‹è¯•**ï¼šæµ‹è¯•åŸºç¡€è®¾æ–½å’Œä¸šåŠ¡åŠŸèƒ½çš„é›†æˆ

### 5. ç‰ˆæœ¬ç®¡ç†

- **åŸºç¡€è®¾æ–½æ›´æ–°**ï¼šé€šè¿‡ `git merge` åŒæ­¥
- **ä¸šåŠ¡åŠŸèƒ½**ï¼šç‹¬ç«‹æäº¤å’Œç‰ˆæœ¬ç®¡ç†
- **é‡å¤§æ›´æ–°**ï¼šåœ¨åˆå¹¶å‰åˆ›å»ºå¤‡ä»½åˆ†æ”¯

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•çŸ¥é“åŸºç¡€è®¾æ–½æœ‰æ›´æ–°ï¼Ÿ

**A**: å®šæœŸæ£€æŸ¥ä¸Šæ¸¸ä»“åº“ï¼š

```bash
git fetch upstream
git log HEAD..upstream/main  # æŸ¥çœ‹æ–°æäº¤
```

æˆ–è€…å…³æ³¨ buildx.work çš„ Release å’Œæ›´æ–°é€šçŸ¥ã€‚

### Q2: åˆå¹¶å†²çªå¤ªå¤šæ€ä¹ˆåŠï¼Ÿ

**A**: 
1. **ä½¿ç”¨æ‰©å±•æ¨¡å—**ï¼šå°½é‡é€šè¿‡ Module æ‰©å±•ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸºç¡€è®¾æ–½ä»£ç 
2. **åˆ†æ‰¹åˆå¹¶**ï¼šä¸è¦ç§¯ç´¯å¤ªå¤šæ›´æ–°ï¼Œå®šæœŸåˆå¹¶
3. **åˆ›å»ºå¤‡ä»½**ï¼šåˆå¹¶å‰åˆ›å»ºå¤‡ä»½åˆ†æ”¯

### Q3: å¯ä»¥ä¿®æ”¹åŸºç¡€è®¾æ–½ä»£ç å—ï¼Ÿ

**A**: 
- **å¼€å‘ç¯å¢ƒ**ï¼šå¯ä»¥ä¸´æ—¶ä¿®æ”¹ç”¨äºæµ‹è¯•
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä¸æ¨èï¼Œä¿®æ”¹ä¼šåœ¨ä¸‹æ¬¡æ›´æ–°æ—¶ä¸¢å¤±
- **å»ºè®®**ï¼šé€šè¿‡æ‰©å±•æ¨¡å—æˆ–æäº¤ PR åˆ°åŸºç¡€è®¾æ–½é¡¹ç›®

### Q4: å¦‚ä½•å›é€€åŸºç¡€è®¾æ–½æ›´æ–°ï¼Ÿ

**A**: 

```bash
# æŸ¥çœ‹åˆå¹¶å†å²
git log --oneline --merges

# å›é€€åˆ°åˆå¹¶å‰
git revert -m 1 <merge-commit-hash>
```

### Q5: æ‰©å±•æ¨¡å—æ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. **æ–‡ä»¶ä½ç½®**ï¼šç¡®ä¿åœ¨ `app/models/concerns/` æˆ– `app/controllers/concerns/`
2. **å‘½åè§„èŒƒ**ï¼šç¡®ä¿æ¨¡å—åæ­£ç¡®ï¼ˆå¦‚ `UserExtensions`ï¼‰
3. **è‡ªåŠ¨åŠ è½½**ï¼šæ£€æŸ¥ `config/initializers/extensions.rb` æ˜¯å¦å­˜åœ¨
4. **é‡å¯æœåŠ¡å™¨**ï¼šå¼€å‘ç¯å¢ƒéœ€è¦é‡å¯æ‰èƒ½åŠ è½½æ–°ä»£ç 

### Q6: å¦‚ä½•è´¡çŒ®åŠŸèƒ½åˆ°åŸºç¡€è®¾æ–½ï¼Ÿ

**A**: è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)ã€‚ç®€è¦æµç¨‹ï¼š

1. **è¯†åˆ«åŸºç¡€è®¾æ–½ä»£ç **ï¼šç¡®ä¿ä¿®å¤å±äºåŸºç¡€è®¾æ–½ï¼Œè€Œéä¸šåŠ¡ç‰¹å®š
2. **åˆ›å»ºä¿®å¤åˆ†æ”¯**ï¼šåœ¨ buildx.work ä¸­åˆ›å»ºä¿®å¤åˆ†æ”¯
3. **åº”ç”¨ä¿®å¤**ï¼šä½¿ç”¨ Git è¡¥ä¸æˆ–æ‰‹åŠ¨å¤åˆ¶ä¿®å¤
4. **æµ‹è¯•éªŒè¯**ï¼šè¿è¡Œæµ‹è¯•ç¡®ä¿ä¿®å¤æ­£ç¡®
5. **æäº¤ä¿®å¤**ï¼šæäº¤æ¸…æ™°çš„æäº¤ä¿¡æ¯
6. **åŒæ­¥åˆ°å­é¡¹ç›®**ï¼šä¿®å¤åˆå¹¶åï¼ŒåŒæ­¥åˆ°å…¶ä»–å­é¡¹ç›®

è¯¦ç»†æ­¥éª¤å’Œç¤ºä¾‹è¯·å‚è€ƒ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)ã€‚

---

## ç›¸å…³èµ„æº

- [å¼€å‘è€…æŒ‡å—](DEVELOPER_GUIDE.md) - æŠ€æœ¯å†³ç­–å’Œæ¶æ„è®¾è®¡
- [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) - å¦‚ä½•å°†ä¿®å¤è´¡çŒ®å›åŸºç¡€è®¾æ–½
- [å­é¡¹ç›®æ¨¡æ¿](../../../buildx.run/template-project/) - å®Œæ•´çš„é¡¹ç›®æ¨¡æ¿å’Œæ‰©å±•ç¤ºä¾‹
- [å¼€å‘è®¡åˆ’](DEVELOPMENT_PLAN.md) - åŸºç¡€è®¾æ–½å¼€å‘è·¯çº¿å›¾

---

**æœ€åæ›´æ–°**ï¼š2025-01-XX  
**ç»´æŠ¤è€…**ï¼šBuildX.work å›¢é˜Ÿ

