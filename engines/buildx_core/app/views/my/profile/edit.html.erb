<div class="container mx-auto px-4 py-8">
  <div class="max-w-2xl mx-auto">
    <%= render "shared/flash_messages" %>

    <div class="mb-6">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="text-4xl font-bold">编辑个人信息</h1>
          <p class="text-base-content/70 mt-2">更新您的个人信息</p>
        </div>

        <%= link_to my_profile_path, class: "btn btn-ghost" do %>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 19l-7-7m0 0l7-7m-7 7h18"
            />
          </svg>
          返回
        <% end %>
      </div>
    </div>

    <div class="card bg-base-100 shadow-xl">
      <div class="card-body">
        <%= daisy_form_with model: @user, url: my_profile_path, method: :patch, local: true, class: "space-y-5" do |form| %>
          <%= form.error_messages %>

          <%= form.text_field :name, label_text: "姓名", placeholder: "请输入您的姓名" %>
          <%= form.email_field :email_address, label_text: "邮箱地址", placeholder: "example@email.com" %>

          <div class="form-control" data-controller="password-strength">
            <%= form.label :password, class: "label" do %>
              <span class="label-text font-medium">新密码（留空则不修改）</span>
            <% end %>

            <%= form.password_field :password,
                placeholder: "至少 8 位，包含字母和数字",
                no_default_classes: true,
                class: "input input-bordered w-full",
                data: {
                  password_strength_target: "input",
                  action: "input->password-strength#updateStrength"
                } %>

            <div
              class="w-full bg-base-200 rounded-full h-2 mt-2"
              style="display: none;"
              data-password-strength-target="indicatorContainer"
            >
              <div
                class="h-2 rounded-full transition-all duration-300"
                data-password-strength-target="indicator"
                style="width: 0%;"
              ></div>
            </div>

            <label class="label">
              <span
                class="label-text-alt"
                data-password-strength-target="feedback"
              >
                留空则不修改密码
              </span>
            </label>
          </div>

          <%= form.password_field :password_confirmation, label_text: "确认新密码", placeholder: "请再次输入新密码" %>

          <%= form.card_actions submit_text: "保存更改", cancel_text: "取消", cancel_url: my_profile_path %>
        <% end %>
      </div>
    </div>
  </div>
</div>
