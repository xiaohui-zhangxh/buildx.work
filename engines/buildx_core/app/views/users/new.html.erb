<div class="text-center mb-8">
  <%= link_to root_path, class: "inline-block" do %>
    <div class="flex flex-col items-center gap-3">
      <%= image_tag "logo.svg", alt: site_name, class: "h-16 w-16" %>

      <h1
        class="
          text-4xl font-bold bg-gradient-to-r from-primary to-secondary
          bg-clip-text text-transparent
        "
      >
        <%= site_name %>
      </h1>
    </div>
  <% end %>
</div>

<% if alert = flash[:alert] %>
  <div role="alert" class="alert alert-error mb-5 shadow-lg">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="stroke-current shrink-0 h-6 w-6"
      fill="none"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>

    <span><%= alert %></span>
  </div>
<% end %>

<% if notice = flash[:notice] %>
  <div role="alert" class="alert alert-success mb-5 shadow-lg">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="stroke-current shrink-0 h-6 w-6"
      fill="none"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>

    <span><%= notice %></span>
  </div>
<% end %>

<div class="card bg-base-100 shadow-2xl border border-base-300">
  <div class="card-body p-8">
    <h2 class="card-title text-3xl mb-2 justify-center">Sign up</h2>

    <p class="text-center text-base-content/60 mb-6">
      Create a new account to get started.
    </p>

    <%= daisy_form_with model: @user, url: users_path, local: true, class: "space-y-5" do |form| %>
      <%= form.error_messages %>

      <%= form.text_field :name, label_text: "Name (optional)", placeholder: "Enter your name" %>

      <%= form.email_field :email_address, label_text: "Email address", required: true, autofocus: true, autocomplete: "username", placeholder: "Enter your email address" %>

      <div class="form-control" data-controller="password-strength">
        <%= form.label :password, class: "label" do %>
          <span class="label-text font-medium">Password</span>
        <% end %>

        <%= form.password_field :password, required: true, autocomplete: "new-password", placeholder: "Enter your password (min 8 characters)", maxlength: 72, no_default_classes: true, class: "input input-bordered w-full focus:input-primary", data: { password_strength_target: "input", action: "input->password-strength#updateStrength" } %>

        <div
          class="w-full bg-base-200 rounded-full h-2 mt-2"
          style="display: none;"
          data-password-strength-target="indicatorContainer"
        >
          <div
            class="h-2 rounded-full transition-all duration-300"
            data-password-strength-target="indicator"
            style="width: 0%;"
          ></div>
        </div>

        <label class="label">
          <span
            class="label-text-alt text-base-content/60"
            data-password-strength-target="feedback"
          >
            At least 8 characters, including letters and numbers
          </span>
        </label>
      </div>

      <%= form.password_field :password_confirmation, label_text: "Password confirmation", required: true, autocomplete: "new-password", placeholder: "Confirm your password", maxlength: 72 %>

      <div class="form-control mt-6">
        <%= form.submit "Sign up", full_width: true, size: "lg" %>
      </div>

      <div class="text-center mt-6 space-y-2">
        <div class="divider my-4">OR</div>

        <p class="text-sm text-base-content/60">
          Already have an account?
          <%= link_to "Sign in", new_session_path, class: "link link-primary font-medium" %>
        </p>
      </div>
    <% end %>
  </div>
</div>
